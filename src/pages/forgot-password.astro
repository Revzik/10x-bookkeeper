---
import AuthLayout from "../layouts/AuthLayout.astro";
import { AuthForgotPasswordPage } from "../components/auth/AuthForgotPasswordPage";

export const prerender = false;

/**
 * /forgot-password - Request password reset email
 *
 * This is step 1 of the password reset flow (US-003):
 * 1. User enters email on this page
 * 2. POST /api/v1/auth/password-reset sends reset email
 * 3. Email contains link to /auth/callback?code={code}&next=/reset-password
 * 4. User clicks link → code exchanged for session → redirected to /reset-password
 * 5. User enters new password and is logged in
 *
 * Security:
 * - Always shows success message (prevents account enumeration)
 * - Only sends email if account exists (handled by Supabase)
 * - Rate limiting ready for spam prevention
 */
---

<AuthLayout title="Forgot Password — 10x Bookkeeper" showSignInLink={true}>
  <AuthForgotPasswordPage client:only="react" />
</AuthLayout>
