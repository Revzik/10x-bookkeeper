---
import AuthLayout from "../layouts/AuthLayout.astro";
import { AuthResetPasswordPage } from "../components/auth/AuthResetPasswordPage";

export const prerender = false;

/**
 * /reset-password - Set new password after email verification
 *
 * This page is accessed after the user clicks the password reset link in their email.
 * The link redirects through /auth/callback which exchanges the code for a session,
 * then redirects here.
 *
 * Server-side check:
 * - If user has a valid session → show reset form
 * - If no session → show expired/invalid link message
 */

// Check if user has a valid session (set by /auth/callback after code exchange)
const hasValidRecoverySession = !!Astro.locals.user;
---

<AuthLayout title="Reset Password — 10x Bookkeeper">
  <AuthResetPasswordPage client:only="react" hasValidRecoverySession={hasValidRecoverySession} />
</AuthLayout>
